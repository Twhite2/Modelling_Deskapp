#include <iostream>
#include <cmath>

// Assigning Values to Variables
const double GRAVITY = 9.81; // gravitational acceleration (m/s^2)
const double RHO_OIL = 890; // density of oil (kg/m^3)
const double MU_OIL = 0.001; // viscosity of oil (Pa*s)

// Function for Calculating the friction
double calcFrictionFactor(double reynoldsNumber, double roughness) {
  double f;
  if (reynoldsNumber <= 2100) {
    // laminar flow
    f = 64/reynoldsNumber;
  } else {
    // turbulent flow
    double relativeRoughness = roughness/pipeDiameter;
    f = 0.25/(std::pow(std::log10(relativeRoughness/3.7 + 5.74/std::pow(reynoldsNumber, 0.9)), 2));
  }
  return f;
}

//Function to calculate the pressure drop

double calcPressureDrop(double flowRate, double pipeLength, double pipeDiameter, double roughness) {
  double velocity = flowRate/(M_PI*std::pow(pipeDiameter/2, 2));
  double reynoldsNumber = RHO_OIL*velocity*pipeDiameter/MU_OIL;
  double frictionFactor = calcFrictionFactor(reynoldsNumber, roughness);
  double pressureDrop = frictionFactor*pipeLength*std::pow(velocity, 2)/(2*GRAVITY*pipeDiameter);
  return pressureDrop;
}

//Main function
int main() {
  double flowRate = 100; // flow rate in m^3/s
  double pipeLength = 1000; // pipe length in m
  double pipeDiameter = 0.1; // pipe diameter in m
  double roughness = 0.0001; // roughness in m
  double pressureDrop = calcPressureDrop(flowRate, pipeLength, pipeDiameter, roughness);
  std::cout << "Pressure drop: " << pressureDrop << " Pa" << std::endl;
  return 0;
}
